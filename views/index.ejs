<%- include('partials/header') %>

<main class="content">
    <div class="pdf-container">
        <div class="pdf-controls">
            <button id="loadSecondPdf">View Page 2 BI Dashboard</button>
            <button id="reloadDefaultPdf">Reload BI Dasboard Page 1</button>
            <button id="downloadPdf">Download Current PDF</button>
        </div>
        <iframe id="pdfFrame" src="<%= defaultPdf %>" width="90%" height="600px" style="border: none;"></iframe>
        <p>You can resize the iframe by dragging its borders (browser default behavior).</p>
    </div>
</main>

<%- include('partials/footer') %>

<script>
    // This script should be in public/js/script.js or embedded directly if small
    document.addEventListener('DOMContentLoaded', () => {
        const pdfFrame = document.getElementById('pdfFrame');
        const loadSecondPdfBtn = document.getElementById('loadSecondPdf');
        const reloadDefaultPdfBtn = document.getElementById('reloadDefaultPdf');
        const downloadPdfBtn = document.getElementById('downloadPdf');

        loadSecondPdfBtn.addEventListener('click', () => {
            pdfFrame.src = '/pdfs/second.pdf';
        });

        reloadDefaultPdfBtn.addEventListener('click', () => {
            pdfFrame.src = '/pdfs/default.pdf';
        });

        downloadPdfBtn.addEventListener('click', () => {
            const currentPdfSrc = pdfFrame.src;
            if (currentPdfSrc) {
                const link = document.createElement('a');
                link.href = currentPdfSrc;
                link.download = currentPdfSrc.split('/').pop(); // Get filename from URL
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        });
    });
</script>